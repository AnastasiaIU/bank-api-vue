import{r as u,c as y,d as v,g as t,l as G,s as z,a as H,x as L,u as U,o as K,y as R,q as w,A as F,f as h,n as N,e as A,t as C,F as D,z as M,j as q,h as J}from"./index-DuCoVbdZ.js";import{_ as Q}from"./TransactionCard-CldF_gjv.js";import"./formatters-DwE89AP2.js";const W={class:"border p-3 rounded mb-3"},X={class:"mb-2"},Y={class:"row mb-3"},Z={class:"col-md-4"},tt=["value"],et={class:"col-md-4"},st=["value"],nt={class:"row mb-3"},at={class:"col-md-6"},lt=["value"],ot={class:"col-md-6"},rt=["value"],it={class:"row mb-3"},ut={class:"col-md-6"},ct=["value"],dt={class:"col-md-6"},vt=["value"],mt={__name:"TransactionFilters",props:{filters:Object},emits:["update:filters","submit","clear"],setup(c,{emit:I}){const o=c,b=I,r=u({...o.filters});function n(f,e){r.value[f]=e}function g(){b("update:filters",{...r.value}),b("submit")}function i(){Object.keys(r.value).forEach(f=>r.value[f]=""),b("update:filters",{}),b("clear")}return(f,e)=>(v(),y("div",W,[e[15]||(e[15]=t("h5",{class:"mb-3"},"Transaction Filters",-1)),t("div",X,[e[7]||(e[7]=t("label",{class:"form-label"},"Description",-1)),G(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=l=>r.value.description=l),placeholder:"e.g. groceries, transfer, salary"},null,512),[[z,r.value.description]])]),t("div",Y,[t("div",Z,[e[8]||(e[8]=t("label",{class:"form-label"},"Amount",-1)),t("input",{type:"number",step:"0.01",class:"form-control",value:c.filters.amount,onInput:e[1]||(e[1]=l=>n("amount",l.target.value))},null,40,tt)]),t("div",et,[e[10]||(e[10]=t("label",{class:"form-label"},"Comparison",-1)),t("select",{class:"form-select",value:c.filters.comparison,onChange:e[2]||(e[2]=l=>n("comparison",l.target.value))},e[9]||(e[9]=[t("option",{value:""},"Select",-1),t("option",{value:"lt"},"Less than",-1),t("option",{value:"eq"},"Equal to",-1),t("option",{value:"gt"},"Greater than",-1)]),40,st)])]),e[16]||(e[16]=t("hr",null,null,-1)),t("div",nt,[t("div",at,[e[11]||(e[11]=t("label",{class:"form-label"},"Start Date",-1)),t("input",{type:"date",class:"form-control",value:c.filters.startDate,onInput:e[3]||(e[3]=l=>n("startDate",l.target.value))},null,40,lt)]),t("div",ot,[e[12]||(e[12]=t("label",{class:"form-label"},"End Date",-1)),t("input",{type:"date",class:"form-control",value:c.filters.endDate,onInput:e[4]||(e[4]=l=>n("endDate",l.target.value))},null,40,rt)])]),e[17]||(e[17]=t("hr",null,null,-1)),t("div",it,[t("div",ut,[e[13]||(e[13]=t("label",{class:"form-label"},"Source IBAN",-1)),t("input",{type:"text",class:"form-control",value:c.filters.sourceIban,onInput:e[5]||(e[5]=l=>n("sourceIban",l.target.value))},null,40,ct)]),t("div",dt,[e[14]||(e[14]=t("label",{class:"form-label"},"Target IBAN",-1)),t("input",{type:"text",class:"form-control",value:c.filters.targetIban,onInput:e[6]||(e[6]=l=>n("targetIban",l.target.value))},null,40,vt)])]),e[18]||(e[18]=t("hr",null,null,-1)),t("div",{class:"text-center"},[t("button",{type:"submit",class:"btn btn-primary me-2",onClick:g},"Apply Filters"),t("button",{type:"button",class:"btn btn-secondary",onClick:i},"Clear Filters")])]))}},bt={class:"m-3 text-center"},ft={key:0},pt={class:"h2 text-center mb-3"},yt={class:"text-center mb-3"},gt={key:1,class:"text-muted text-center"},It={class:"list-group mb-4"},_t={"aria-label":"Page navigation",class:"d-flex justify-content-center align-items-center m-4 gap-3"},xt=["disabled"],Ct={class:"text-muted fw-semibold"},ht=["disabled"],St={__name:"TransactionList",setup(c){const I=H(),o=L(),b=U(),r=u([]),n=u(null),g=u([]),i=u(0),f=u(10),e=u(0),l=u(0),m=u({startDate:o.query.startDate||"",endDate:o.query.endDate||"",amount:o.query.amount||"",comparison:o.query.comparison||"",sourceIban:o.query.sourceIban||"",targetIban:o.query.targetIban||"",description:o.query.description||""}),_=u(!1);function E(){_.value=!_.value}function T(){Object.keys(m.value).forEach(a=>m.value[a]=""),S()}function V(a){m.value=a,S()}function S(){const a=Object.fromEntries(Object.entries(m.value).filter(([s,d])=>d!==""&&d!=null));b.push({query:a})}K(P),R(()=>o.query,a=>{Object.assign(m.value,a),p()});async function P(){try{const a=await w.get(F.accountsById(I.user.id));r.value=a.data,r.value.length>0&&(n.value=r.value[0],await p())}catch(a){console.error("Failed to fetch accounts:",a)}}async function p(a=i.value){if(n.value)try{const s=new URLSearchParams;for(const[B,k]of Object.entries(m.value))k&&s.append(B,k);s.append("page",a),s.append("size",f.value);const d=`${F.accountTransactionsbyId(n.value.id)}?${s.toString()}`,x=await w.get(d);g.value=x.data.content,e.value=x.data.totalPages,l.value=x.data.totalElements,i.value=x.data.number}catch(s){console.error("Failed to fetch transactions:",s)}}function j(){i.value>0&&p(i.value-1)}function O(){i.value<e.value-1&&p(i.value+1)}function $(a){n.value=r.value.find(s=>s.type===a),p()}return(a,s)=>(v(),y(D,null,[t("div",bt,[t("button",{class:N(["btn me-2",n.value?.type==="CHECKING"?"btn-primary":"btn-secondary"]),onClick:s[0]||(s[0]=d=>$("CHECKING"))}," View CHECKING ",2),t("button",{class:N(["btn",n.value?.type==="SAVINGS"?"btn-primary":"btn-secondary"]),onClick:s[1]||(s[1]=d=>$("SAVINGS"))}," View SAVINGS ",2)]),n.value?(v(),y("div",ft,[t("h1",pt,"Transactions for "+C(n.value.iban),1),t("div",yt,[t("button",{class:"btn btn-primary",onClick:E},C(_.value?"Hide Filters":"Show Filters"),1)]),_.value?(v(),A(mt,{key:0,filters:m.value,"onUpdate:filters":V,onSubmit:p,onClear:T},null,8,["filters"])):h("",!0),g.value.length===0?(v(),y("div",gt," No transactions found. ")):h("",!0),t("ul",It,[(v(!0),y(D,null,M(g.value,d=>(v(),A(Q,{key:d.id,transaction:d,"reference-iban":n.value.iban},null,8,["transaction","reference-iban"]))),128))]),t("nav",_t,[t("button",{class:"btn btn-outline-primary",onClick:j,disabled:i.value===0},s[2]||(s[2]=[t("i",{class:"bi bi-chevron-left"},null,-1),q(" Previous")]),8,xt),t("span",Ct," Page "+C(i.value+1)+" of "+C(e.value),1),t("button",{class:"btn btn-outline-primary",onClick:O,disabled:i.value>=e.value-1},s[3]||(s[3]=[q("Next "),t("i",{class:"bi bi-chevron-right"},null,-1)]),8,ht)])])):h("",!0)],64))}},$t={class:"container-fluid d-flex flex-column flex-grow-1 align-items-center p-0"},Nt={__name:"AccountTransactionsViews",setup(c){return(I,o)=>(v(),y("main",$t,[J(St)]))}};export{Nt as default};
