import{r as p,c as b,d as v,g as t,a as q,s as T,u as E,o as V,x as j,q as S,A,f as _,n as h,e as O,t as m,F as N,y as B,j as $,h as G}from"./index-ZX3uO6H3.js";const L={class:"border p-3 rounded mb-3"},H={class:"row mb-3"},K={class:"col-md-4"},P=["value"],R={class:"col-md-4"},U=["value"],z={class:"row mb-3"},M={class:"col-md-6"},J=["value"],Q={class:"col-md-6"},W=["value"],X={class:"row mb-3"},Y={class:"col-md-6"},Z=["value"],tt={class:"col-md-6"},et=["value"],st={__name:"TransactionFilters",props:{filters:Object},emits:["update:filters","submit","clear"],setup(u,{emit:g}){const r=u,f=g,i=p({...r.filters});function n(d,e){i.value[d]=e}function y(){f("update:filters",{...i.value}),f("submit")}function c(){Object.keys(i.value).forEach(d=>i.value[d]=""),f("update:filters",{}),f("clear")}return(d,e)=>(v(),b("div",L,[e[13]||(e[13]=t("h5",{class:"mb-3"},"Transaction Filters",-1)),t("div",H,[t("div",K,[e[6]||(e[6]=t("label",{class:"form-label"},"Amount",-1)),t("input",{type:"number",step:"0.01",class:"form-control",value:u.filters.amount,onInput:e[0]||(e[0]=a=>n("amount",a.target.value))},null,40,P)]),t("div",R,[e[8]||(e[8]=t("label",{class:"form-label"},"Comparison",-1)),t("select",{class:"form-select",value:u.filters.comparison,onChange:e[1]||(e[1]=a=>n("comparison",a.target.value))},e[7]||(e[7]=[t("option",{value:""},"Select",-1),t("option",{value:"lt"},"Less than",-1),t("option",{value:"eq"},"Equal to",-1),t("option",{value:"gt"},"Greater than",-1)]),40,U)])]),e[14]||(e[14]=t("hr",null,null,-1)),t("div",z,[t("div",M,[e[9]||(e[9]=t("label",{class:"form-label"},"Start Date",-1)),t("input",{type:"date",class:"form-control",value:u.filters.startDate,onInput:e[2]||(e[2]=a=>n("startDate",a.target.value))},null,40,J)]),t("div",Q,[e[10]||(e[10]=t("label",{class:"form-label"},"End Date",-1)),t("input",{type:"date",class:"form-control",value:u.filters.endDate,onInput:e[3]||(e[3]=a=>n("endDate",a.target.value))},null,40,W)])]),e[15]||(e[15]=t("hr",null,null,-1)),t("div",X,[t("div",Y,[e[11]||(e[11]=t("label",{class:"form-label"},"Source IBAN",-1)),t("input",{type:"text",class:"form-control",value:u.filters.sourceIban,onInput:e[4]||(e[4]=a=>n("sourceIban",a.target.value))},null,40,Z)]),t("div",tt,[e[12]||(e[12]=t("label",{class:"form-label"},"Target IBAN",-1)),t("input",{type:"text",class:"form-control",value:u.filters.targetIban,onInput:e[5]||(e[5]=a=>n("targetIban",a.target.value))},null,40,et)])]),e[16]||(e[16]=t("hr",null,null,-1)),t("div",{class:"text-center"},[t("button",{type:"submit",class:"btn btn-primary me-2",onClick:y},"Apply Filters"),t("button",{type:"button",class:"btn btn-secondary",onClick:c},"Clear Filters")])]))}},nt={class:"m-3 text-center"},lt={key:0},at={class:"h2 text-center mb-3"},ot={class:"text-center mb-3"},rt={key:1,class:"text-muted text-center"},ut={class:"list-group mb-4"},it={class:"fw-bold"},ct={class:"text-muted"},dt={class:"text-end"},mt={class:"text-muted"},vt={__name:"TransactionList",setup(u){const g=q(),r=T(),f=E(),i=p([]),n=p(null),y=p([]),c=p({startDate:r.query.startDate||"",endDate:r.query.endDate||"",amount:r.query.amount||"",comparison:r.query.comparison||"",sourceIban:r.query.sourceIban||"",targetIban:r.query.targetIban||""}),d=p(!1);function e(){d.value=!d.value}function a(){Object.keys(c.value).forEach(s=>c.value[s]=""),F()}function x(s){c.value=s,F()}function F(){const s=Object.fromEntries(Object.entries(c.value).filter(([o,l])=>l!==""&&l!=null));f.push({query:s})}V(k),j(()=>r.query,s=>{Object.assign(c.value,s),I()});async function k(){try{const s=await S.get(A.accountsById(g.user.id));i.value=s.data,i.value.length>0&&(n.value=i.value[0],await I())}catch(s){console.error("Failed to fetch accounts:",s)}}async function I(){if(n.value)try{const s=new URLSearchParams;for(const[D,C]of Object.entries(c.value))C&&s.append(D,C);const o=`${A.accountTransactionsbyId(n.value.id)}?${s.toString()}`,l=await S.get(o);y.value=l.data}catch(s){console.error("Failed to fetch transactions:",s)}}function w(s){n.value=i.value.find(o=>o.type===s),I()}return(s,o)=>(v(),b(N,null,[t("div",nt,[t("button",{class:h(["btn me-2",n.value?.type==="CHECKING"?"btn-primary":"btn-secondary"]),onClick:o[0]||(o[0]=l=>w("CHECKING"))}," View CHECKING ",2),t("button",{class:h(["btn",n.value?.type==="SAVINGS"?"btn-primary":"btn-secondary"]),onClick:o[1]||(o[1]=l=>w("SAVINGS"))}," View SAVINGS ",2)]),n.value?(v(),b("div",lt,[t("h1",at,"Transactions for "+m(n.value.iban),1),t("div",ot,[t("button",{class:"btn btn-primary",onClick:e},m(d.value?"Hide Filters":"Show Filters"),1)]),d.value?(v(),O(st,{key:0,filters:c.value,"onUpdate:filters":x,onSubmit:I,onClear:a},null,8,["filters"])):_("",!0),y.value.length===0?(v(),b("div",rt," No transactions found. ")):_("",!0),t("ul",ut,[(v(!0),b(N,null,B(y.value,l=>(v(),b("li",{key:l.id,class:"list-group-item d-flex justify-content-between align-items-start"},[t("div",null,[t("div",it,m(new Date(l.timestamp).toLocaleString()),1),t("small",ct,m(l.description),1)]),t("div",dt,[t("div",{class:h(l.targetIban===n.value.iban?"text-success":"")},m(l.targetIban===n.value.iban?"+":"-")+"â‚¬"+m(l.amount.toFixed(2)),3),t("small",mt,[$(" From: "+m(l.sourceIban||"N/A"),1),o[2]||(o[2]=t("br",null,null,-1)),$(" To: "+m(l.targetIban||"N/A"),1)])])]))),128))])])):_("",!0)],64))}},bt={class:"container-fluid d-flex flex-column flex-grow-1 align-items-center p-0"},pt={__name:"AccountTransactionsViews",setup(u){return(g,r)=>(v(),b("main",bt,[G(vt)]))}};export{pt as default};
