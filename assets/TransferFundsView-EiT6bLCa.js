import{p as F,r as A,q as T,A as y,c as h,d as f,g as i,h as n,i as o,w as v,a as w,o as M,e as S,f as V}from"./index-DuY1-B3a.js";import{T as E}from"./Toast-C3bS__uk.js";import{c as $,h as R,i as k,j as _,u as B,_ as d}from"./rules-Cf1QsYaS.js";import{p as N}from"./formatters-DwE89AP2.js";import{A as g}from"./AccountDropdown-DTVKXW-i.js";import{_ as C}from"./TextInput-DkCPOOgK.js";const O=$({fromAccount:_,toAccount:_,amount:k,description:R().nullable()}),P={class:"card col-md-6 col-lg-5 col-xl-4 p-4 m-4"},D=["disabled"],U={__name:"TransferFundsEmp",setup(I){const c=A(null),{handleSubmit:a,meta:l,resetForm:p}=B({validationSchema:O,validateOnMount:!0}),b=a(async u=>{try{const e={sourceAccount:u.fromAccountIban,targetAccount:u.toAccountIban,amount:N(u.amount),description:u.description||null};(await T.post(y.transactions,e)).status===201?(c.value.setToast("Transaction created successfully!","success"),p()):c.value.setToast("Failed to create transaction. Please try again.","error")}catch{c.value.setToast("An error occurred while creating the transaction.","error")}});return(u,e)=>(f(),h("section",P,[e[1]||(e[1]=i("h1",{class:"text-center"},"Transfer Funds",-1)),i("form",{onSubmit:e[0]||(e[0]=v((...m)=>o(b)&&o(b)(...m),["prevent"])),class:"d-flex flex-column gap-2"},[n(d,{name:"fromAccountIban",label:"From IBAN"}),n(d,{name:"toAccountIban",label:"To IBAN"}),n(d,{name:"amount",label:"Amount to Transfer",type:"currency"}),n(d,{name:"description",label:"Description"}),i("button",{class:"btn btn-primary",type:"submit",disabled:!o(l).valid},"Transfer",8,D)],32),n(E,{ref_key:"toastRef",ref:c},null,512)]))}},j=F(U,[["__scopeId","data-v-8e01d2b8"]]),q=$({fromAccountIban:_,toAccountIban:_,amount:k,description:R().nullable()}),L={class:"card col-md-6 col-lg-5 col-xl-4 p-4 m-4"},Y=["disabled"],Z={__name:"TransferFundsCus",setup(I){const c=w(),a=A(null),l=A([]),{handleSubmit:p,meta:b,resetForm:u,setFieldValue:e}=B({validationSchema:q,initialValues:{fromAccountIban:"",toAccountIban:"",amount:"",description:""},validateOnMount:!0});async function m(){try{const s=await T.get(y.accountsById(c.user.id));l.value=s.data}catch(s){console.error("Error fetching accounts:",s)}}const x=p(async s=>{try{const t={sourceAccount:s.fromAccountIban,targetAccount:s.toAccountIban,amount:N(s.amount),description:s.description||null};(await T.post(y.transactions,t)).status===201?(a.value.setToast("Transaction created successfully!","success"),u(),await m()):a.value.setToast("Failed to create transaction. Please try again.","error")}catch{a.value.setToast("An error occurred while creating the transaction.","error")}});return M(m),(s,t)=>(f(),h("section",L,[t[3]||(t[3]=i("h1",{class:"h2 text-center"},"Transfer Funds",-1)),i("form",{onSubmit:t[2]||(t[2]=v((...r)=>o(x)&&o(x)(...r),["prevent"])),class:"d-flex flex-column gap-2"},[n(g,{accounts:l.value,label:"From Account","onUpdate:selectedAccount":t[0]||(t[0]=r=>o(e)("fromAccountIban",r?r.iban:""))},null,8,["accounts"]),n(g,{accounts:l.value,label:"To Account","onUpdate:selectedAccount":t[1]||(t[1]=r=>o(e)("toAccountIban",r?r.iban:""))},null,8,["accounts"]),n(d,{name:"amount",label:"Amount to Transfer",type:"currency"}),n(C,{name:"description",label:"Description"}),i("button",{class:"btn btn-primary",type:"submit",disabled:!o(b).valid},"Transfer",8,Y)],32),n(E,{ref_key:"toastRef",ref:a},null,512)]))}},z=F(Z,[["__scopeId","data-v-3dac1343"]]),G={class:"container-fluid d-flex flex-column flex-grow-1 align-items-center p-0"},tt={__name:"TransferFundsView",setup(I){const a=w().user.role;return(l,p)=>(f(),h("main",G,[o(a)==="EMPLOYEE"?(f(),S(j,{key:0})):o(a)==="CUSTOMER"?(f(),S(z,{key:1})):V("",!0)]))}};export{tt as default};
