import{c as u,d as a,F as f,y as E,t as r,u as U,s as $,a as k,r as g,o as x,g as e,j as _,i as D,h as V,E as c,A as h,e as I}from"./index-ZX3uO6H3.js";const P=["value"],R=["value"],A={__name:"LimitDropdown",props:{modelValue:Number,options:Array},emits:["update:modelValue"],setup(m,{emit:p}){const v=p;return(n,b)=>(a(),u("select",{class:"form-select form-select-sm",value:m.modelValue,onChange:b[0]||(b[0]=l=>v("update:modelValue",Number(l.target.value)))},[(a(!0),u(f,null,E(m.options,l=>(a(),u("option",{key:l,value:l},r(l.toLocaleString()),9,R))),128))],40,P))}},C={class:"container py-5"},S={class:"card shadow-sm p-4 border-top border-primary",style:{"border-top-width":"5px"}},z={class:"row"},T={class:"col-md-4 mb-4"},O={class:"col-md-8"},j={class:"table-responsive"},F={class:"table table-bordered align-middle table-hover"},J={class:"d-none"},M={class:"mt-4 text-end"},W={__name:"CustomerApproval",setup(m){const p=U(),n=$().params.id,l=k().token,i=g({}),y=g([]),L=async()=>{try{const s=await c.get(h.usersById(n),{headers:{Authorization:`Bearer ${l}`}});i.value=s.data}catch(s){console.error("Error fetching user:",s)}},N=async()=>{try{const s=await c.get(h.accountsByIdReview(n),{headers:{Authorization:`Bearer ${l}`}});y.value=s.data}catch(s){console.error("Error fetching accounts:",s)}},w=async s=>{try{await c.put(h.usersApproval(n),{approvalStatus:s},{headers:{Authorization:`Bearer ${l}`}}),s==="APPROVED"&&await c.post(h.userAccounts(n),y.value,{headers:{Authorization:`Bearer ${l}`}}),await p.push("/users/review")}catch(t){console.error("Error during approval:",t)}};return x(async()=>{await Promise.all([N(),L()])}),(s,t)=>(a(),u("div",C,[e("div",S,[t[8]||(t[8]=e("h2",{class:"mb-4"},"User Account Review",-1)),e("div",z,[e("div",T,[t[5]||(t[5]=e("h5",{class:"mb-4"},"User Information",-1)),e("p",null,[t[2]||(t[2]=e("strong",null,"Name:",-1)),_(" "+r(i.value.firstName)+" "+r(i.value.lastName),1)]),e("p",null,[t[3]||(t[3]=e("strong",null,"Email:",-1)),_(" "+r(i.value.email),1)]),e("p",null,[t[4]||(t[4]=e("strong",null,"Phone:",-1)),_(" "+r(i.value.phoneNumber),1)])]),e("div",O,[t[7]||(t[7]=e("h5",{class:"mb-3"},"Account Configuration",-1)),e("div",j,[e("table",F,[t[6]||(t[6]=e("thead",{class:"table-light"},[e("tr",null,[e("th"),e("th",{class:"d-none"},"User ID"),e("th",null,"IBAN"),e("th",null,"Type"),e("th",null,"Daily Limit (€)"),e("th",null,"Withdraw Limit (€)"),e("th",null,"Absolute Limit (€)")])],-1)),e("tbody",null,[(a(!0),u(f,null,E(y.value,(o,B)=>(a(),u("tr",{key:o.iban},[e("td",null,r(B+1),1),e("td",J,r(D(n)),1),e("td",null,r(o.iban),1),e("td",null,r(o.type),1),e("td",null,[V(A,{modelValue:o.dailyLimit,"onUpdate:modelValue":d=>o.dailyLimit=d,options:[0,1e3,2e3,3e3,5e3]},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,[V(A,{modelValue:o.withdrawLimit,"onUpdate:modelValue":d=>o.withdrawLimit=d,options:[0,500,1e3,2e3,3e3]},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,[V(A,{modelValue:o.absoluteLimit,"onUpdate:modelValue":d=>o.absoluteLimit=d,options:[0,-100,-200,-300,-500]},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])])])])]),e("div",M,[e("button",{class:"btn btn-success me-2",onClick:t[0]||(t[0]=o=>w("APPROVED"))},"Approve"),e("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=o=>w("REJECTED"))},"Reject")])])]))}},G={__name:"CustomerApprovalView",setup(m){return(p,v)=>(a(),I(W))}};export{G as default};
